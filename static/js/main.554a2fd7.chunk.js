(this.webpackJsonpstarwars=this.webpackJsonpstarwars||[]).push([[0],{25:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),i=r(17),a=r.n(i),c=r(4),o=r.n(c),l=r(6),u=r(3),d=(r(25),r(19)),m=r(18),j=r.n(m),f={getFilms:function(){return v.apply(this,arguments)},addFilmToStorage:function(e,t){var r=b(e)?b(e):[];return r.some((function(e){return e.episode_id===t.episode_id}))?{message:"".concat(t.title," is already a favorite film"),status:"error"}:(r=[t].concat(Object(d.a)(r)),localStorage.setItem(e,JSON.stringify(r)),{message:"".concat(t.title," has added to your favorite films!"),status:"success"})},removeFilmFromStorage:function(e,t){var r=b(e);return r=r.filter((function(e){return e.episode_id!==t.episode_id})),localStorage.setItem(e,JSON.stringify(r)),r},loadFilmFromStorage:b};function v(){return(v=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://swapi.dev/api/films/");case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}var O=r(0);function h(e){var t=e.film,r=e.selectFilm;return Object(O.jsx)("div",{className:"film-item-box",onClick:function(){return r(t)},children:Object(O.jsx)("p",{children:t.title})})}function p(e){var t=e.film,r=e.addToFavorites;return Object(O.jsxs)("div",{className:"film-preview-box",children:[Object(O.jsx)("h1",{children:t.title}),Object(O.jsx)("p",{children:t.opening_crawl}),Object(O.jsx)("button",{onClick:function(){return r(t)},children:"Add to favorites"})]})}var x="favoriteFilms";function g(e){var t=e.film,r=e.removeFavoriteFilm;return Object(O.jsxs)("div",{className:"favorite-film-box",children:[Object(O.jsx)("h3",{children:t.title}),Object(O.jsx)("button",{className:"remove-film-btn",onClick:function(){return r(t)},children:"Delete"})]})}function F(e){var t=e.setIsFavoritesModalOpen,r=Object(n.useState)(null),s=Object(u.a)(r,2),i=s[0],a=s[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){var e=f.loadFilmFromStorage(x);a(e)},o=function(e){var t=f.removeFilmFromStorage(x,e);a(t)};return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"favorites-modal-box",children:[Object(O.jsx)("h1",{children:"My Favorite Films"}),Object(O.jsx)("div",{className:"modal-films-list",children:0===(null===i||void 0===i?void 0:i.length)?Object(O.jsx)("p",{children:"You have no favorite films."}):null===i||void 0===i?void 0:i.map((function(e){return Object(O.jsx)(g,{film:e,removeFavoriteFilm:o},e.episode_id)}))}),Object(O.jsx)("i",{onClick:function(){return t(!1)},className:"fas close-modal-btn fa-times"})]})})}function S(e){var t=e.userMessage;return Object(O.jsx)("div",{className:"error"===(null===t||void 0===t?void 0:t.status)?"error-message-modal-box":"success-message-modal-box",children:Object(O.jsx)("p",{children:null===t||void 0===t?void 0:t.message})})}var N=r.p+"static/media/logo.86ad8c03.png";var w=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),r=t[0],s=t[1],i=Object(n.useState)(!1),a=Object(u.a)(i,2),c=a[0],d=a[1],m=Object(n.useState)(),j=Object(u.a)(m,2),v=j[0],b=j[1],g=Object(n.useState)(!1),w=Object(u.a)(g,2),k=w[0],y=w[1],C=Object(n.useState)(null),T=Object(u.a)(C,2),I=T[0],M=T[1];Object(n.useEffect)((function(){_()}),[]);var _=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.getFilms();case 3:t=e.sent,s(t),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),E({message:"There seems to be a problem with the server, please try again",status:"error"}),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),J=function(e){return b(e)},E=function(e){M(e),y(!0),setTimeout((function(){y(!1)}),4e3)};return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("img",{className:"logo-img",src:N,alt:""}),Object(O.jsx)("button",{className:"show-favorites-films-btn",onClick:function(){return d(!c)},children:"My Favorite Films"})]}),c&&Object(O.jsx)(F,{setIsFavoritesModalOpen:d}),k&&Object(O.jsx)(S,{userMessage:I}),Object(O.jsxs)("div",{className:"main-container",children:[Object(O.jsx)("div",{className:"film-table-list-box",children:null===r||void 0===r?void 0:r.map((function(e){return Object(O.jsx)(h,{film:e,selectFilm:J},e.episode_id)}))}),v?Object(O.jsx)(p,{film:v,addToFavorites:function(e){var t=f.addFilmToStorage(x,e);E(t)}}):Object(O.jsx)("h2",{className:"missing-films-message",children:"Click On One Of The Films..."})]})]})},k=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,46)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;r(e),n(e),s(e),i(e),a(e)}))};a.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),k()}},[[45,1,2]]]);
//# sourceMappingURL=main.554a2fd7.chunk.js.map